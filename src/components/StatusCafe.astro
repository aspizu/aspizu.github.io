<div class="hidden absolute z-1 top-35 left-8" id="status-cafe">
    <div
        class="absolute -bottom-0.5 left-4 w-4 h-4 rotate-45 bg-linear-to-b from-neutral-800 to-neutral-700 border-l border-b border-neutral-700 shadow-sm -z-1"
        aria-hidden="true"
    >
    </div>

    <div
        id="status-bubble"
        class="bg-linear-to-b from-neutral-800 to-neutral-700 backdrop-blur-sm border border-neutral-700 shadow-md rounded-xl px-1.5 py-1 max-w-64 z-3"
        role="status"
        aria-live="polite"
    >
        <p id="status-content" class="text-sm leading-5 text-neutral-100 truncate m-0">
        </p>
    </div>
</div>

<script>
    const statusCafe = document.getElementById("status-cafe")

    async function updateStatus() {
        const target = document.getElementById("status-content")
        try {
            const res = await fetch("https://status.cafe/users/aspizu/status.json", {
                cache: "no-cache",
            })
            if (!res.ok) throw new Error("network response not ok")
            const result = await res.json()
            target.textContent =
                `${result.content ?? ""} ${result.face ?? ""}`.trim() || "No status"
            statusCafe.style.display = "inline-block"
        } catch (err) {
            console.error("status fetch failed", err)
            target.textContent = "Status unavailable"
        }
    }

    updateStatus()
</script>
